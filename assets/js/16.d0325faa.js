(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{514:function(t,s,e){"use strict";e.r(s);var a=e(4),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"gitee-pages自动同步github-pages的内容"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#gitee-pages自动同步github-pages的内容"}},[t._v("#")]),t._v(" Gitee Pages自动同步GitHub Pages的内容")]),t._v(" "),e("h2",{attrs:{id:"遇到的问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#遇到的问题"}},[t._v("#")]),t._v(" 遇到的问题")]),t._v(" "),e("p",[t._v("因为国内无法访问到GitHub Pages的原因。"),e("br"),t._v("\n我把GitHub仓库 同步到了 码云-Gitee  并且启用 Gitee Pages")]),t._v(" "),e("blockquote",[e("p",[t._v("我想同时更新两个仓库,也就是两个博客。。。")])]),t._v(" "),e("ul",[e("li",[t._v("之前用的方法是 一个本地仓库绑定两个远程仓库（GitHub和Gitee）")])]),t._v(" "),e("p",[t._v("但由于我GitHub Pages的主分支是用 副分支采用GitHub的Actions自动部署的"),e("br"),t._v("\n（简单说就是，我GitHub只push副分支，所以Gitee也只push副分支，而GitHub的Actions有帮我打包更新到master主分支，而Gitee码云没有更新master主分支）")]),t._v(" "),e("p",[t._v("这就导致我xxggg.github.io这个博客有更新，而xxggg.gitee.io这个博客没有更新。")]),t._v(" "),e("p",[t._v("解决方法有很多。"),e("br"),t._v(" "),e("strong",[t._v("一：在我的Gitee项目里按一下强制同步那个按钮（但是这。。。）")]),e("br"),t._v(" "),e("strong",[t._v("二：不用主副分支，分两个仓库，一个源代码，一个打包后的代码。（但是这样每次都要手动打包 还要push两次）")]),e("br"),t._v(" "),e("strong",[t._v("三：也就是今天要讲的！👇 用GitHub Actions把代码同步到Gitee")])]),t._v(" "),e("blockquote",[e("p",[t._v("主要参考文章："),e("br"),t._v(" "),e("a",{attrs:{href:"https://www.imooc.com/article/302662",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考文章1"),e("OutboundLink")],1),e("br"),t._v(" "),e("a",{attrs:{href:"https://github.com/marketplace/actions/gitee-pages-action",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考文章2"),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"主要操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#主要操作"}},[t._v("#")]),t._v(" 主要操作")]),t._v(" "),e("p",[t._v("在项目根目录下创建 .github/workflows/ 在这个文件夹里再创建sync.yml文件 （ GitHub 的Actions会处理.github下的工作流文件夹"),e("code",[t._v("workflows")]),t._v(" )")]),t._v(" "),e("div",{staticClass:"language-yml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-yml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Sync\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" psuh "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Sync to Gitee\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" wearerequired/git"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("mirror"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("action@master\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 注意在 Settings->Secrets 配置 GITEE_RSA_PRIVATE_KEY")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("SSH_PRIVATE_KEY")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.GITEE_RSA_PRIVATE_KEY "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 注意替换为你的 GitHub 源仓库地址")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("source-repo")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"git@github.com:XXGGG/xxggg.github.io.git"')]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 注意替换为你的 Gitee 目标仓库地址")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("destination-repo")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"git@gitee.com:XXGGG/XXGGG.git"')]),t._v("\n\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Build Gitee Pages\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" yanglbme/gitee"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pages"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("action@master\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 注意替换为你的 Gitee 用户名")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gitee-username")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" XXGGG\n                "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 注意在 Settings->Secrets 配置 GITEE_PASSWORD")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gitee-password")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.GITEE_PASSWORD "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 注意替换为你的 Gitee 仓库")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gitee-repo")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" XXGGG/XXGGG\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br"),e("span",{staticClass:"line-number"},[t._v("19")]),e("br"),e("span",{staticClass:"line-number"},[t._v("20")]),e("br"),e("span",{staticClass:"line-number"},[t._v("21")]),e("br"),e("span",{staticClass:"line-number"},[t._v("22")]),e("br"),e("span",{staticClass:"line-number"},[t._v("23")]),e("br"),e("span",{staticClass:"line-number"},[t._v("24")]),e("br"),e("span",{staticClass:"line-number"},[t._v("25")]),e("br"),e("span",{staticClass:"line-number"},[t._v("26")]),e("br"),e("span",{staticClass:"line-number"},[t._v("27")]),e("br"),e("span",{staticClass:"line-number"},[t._v("28")]),e("br")])]),e("p",[t._v("这里面最重要的除了简单更换填写你的github跟gitee对应项目地址以外"),e("br"),t._v("\n最重要的的就是配置好你GitHub项目里的"),e("code",[t._v("settings")]),t._v("->"),e("code",[t._v("secrets")]),t._v(" 里的"),e("code",[t._v("GITEE_RSA_PRIVATE_KEY")]),t._v(" 和 "),e("code",[t._v("GITEE_PASSWORD")])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("GITEE_RSA_PRIVATE_KEY")]),t._v(" 是你的私钥")]),t._v(" "),e("li",[e("code",[t._v("GITEE_PASSWORD")]),t._v(" 是你Gitee的账户密码")])]),t._v(" "),e("h2",{attrs:{id:"如何得到私钥公钥"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如何得到私钥公钥"}},[t._v("#")]),t._v(" 如何得到私钥公钥")]),t._v(" "),e("blockquote",[e("p",[t._v("参考文章：\n"),e("a",{attrs:{href:"https://blog.csdn.net/fenghuibian/article/details/73350890",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://blog.csdn.net/fenghuibian/article/details/73350890"),e("OutboundLink")],1),e("br"),t._v(" "),e("a",{attrs:{href:"https://gitee.com/help/articles/4181#article-header0",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://gitee.com/help/articles/4181#article-header0"),e("OutboundLink")],1)])]),t._v(" "),e("h3",{attrs:{id:"第一步-生成ssh-key"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第一步-生成ssh-key"}},[t._v("#")]),t._v(" 第一步 生成SSH Key")]),t._v(" "),e("p",[t._v("打开终端 或者是Git Bash (windows下载git后自带的)")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v('ssh-keygen -t rsa -C "xxxx@xxxx.com"\n//(xxxx@xxxx.com 为你的邮箱)\n')])])]),e("p",[t._v("按照提示完成三次回车，即可生成 ssh key。"),e("br"),t._v("\n通过查看 ~/.ssh/id_rsa.pub 文件内容，获取到你的公钥")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("cat ~/.ssh/id_rsa.pub\n")])])]),e("p",[t._v("然后出来的一大串东西都是公钥。")]),t._v(" "),e("h3",{attrs:{id:"第二步-把公钥添加到github-和-gitee"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第二步-把公钥添加到github-和-gitee"}},[t._v("#")]),t._v(" 第二步 把公钥添加到github 和 gitee")]),t._v(" "),e("p",[t._v("去浏览器登上你的GitHub然后在"),e("code",[t._v("settings")]),t._v("->"),e("code",[t._v("SSH and GPG keys")]),t._v("里添加上公钥（码云gitee同理）")]),t._v(" "),e("h3",{attrs:{id:"第三步-测试是否配置成功-ssh-t-git-github-com"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第三步-测试是否配置成功-ssh-t-git-github-com"}},[t._v("#")]),t._v(" 第三步 测试是否配置成功 ssh -T git@github.com")]),t._v(" "),e("p",[t._v("打开终端，测试github用")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("ssh -T git@github.com\n")])])]),e("p",[t._v("测试itee用")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("ssh -T git@gitee.com\n")])])]),e("p",[t._v("若返回 Hi XXX! You've successfully authenticated, but (Gitee.com/GitHub.com) does not provide shell access. 内容，则证明添加成功。")]),t._v(" "),e("h2",{attrs:{id:"填上刚刚需要的私钥"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#填上刚刚需要的私钥"}},[t._v("#")]),t._v(" 填上刚刚需要的私钥")]),t._v(" "),e("p",[t._v("在 ~/.ssh目录下有id_rsa 和id_rsa.pub两个文件"),e("br"),t._v("\nid_rsa.pub是公钥"),e("br"),t._v("\nid_rsa 是私钥")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("cat ~/.ssh/id_rsa\n")])])]),e("p",[t._v("查看私钥 然后把私钥添加到GitHub项目里的"),e("code",[t._v("settings")]),t._v("->"),e("code",[t._v("secrets")]),t._v(" 里的"),e("code",[t._v("GITEE_RSA_PRIVATE_KEY")])]),t._v(" "),e("blockquote",[e("p",[t._v("注意 全都要复制 别漏了 开头和结尾也要复制进去")])]),t._v(" "),e("h2",{attrs:{id:"最后"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#最后"}},[t._v("#")]),t._v(" 最后")]),t._v(" "),e("p",[t._v("这就可以啦 每次push都会把GitHub的整个仓库（包括分支的内容） 强制同步到Gitee上")]),t._v(" "),e("p",[t._v("对于Gitee Pages前提是你已经开启Gitee Pages哦 首次同步要去开一下Gitee Pages（当然前提是你是准备搞博客或者是别的项目）")]),t._v(" "),e("p",[t._v("如果你只是单纯想同步到Gitee 那还不如一个仓库地址绑定两个远程仓库呢")]),t._v(" "),e("h3",{attrs:{id:"最最后"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#最最后"}},[t._v("#")]),t._v(" 最最后")]),t._v(" "),e("p",[t._v("欢迎大家来看我的blog（前端萌新一只）"),e("br"),t._v(" "),e("a",{attrs:{href:"https://xxggg.github.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("xxggg.github.io"),e("OutboundLink")],1),e("br"),t._v(" "),e("a",{attrs:{href:"https://xxggg.gitee.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("xxggg.gitee.io"),e("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=n.exports}}]);